[{"path":"https://cetialphafive.github.io/MLbalance/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jack T. Rametta. Author, maintainer. Sam Fuller. Author.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Rametta JT, Fuller S (2025). MLbalance: Machine Learning Balance. R package version 0.2, https://github.com/CetiAlphaFive/MLbalance.","code":"@Manual{,   title = {MLbalance: Machine Learning Balance},   author = {Jack T. Rametta and Sam Fuller},   year = {2025},   note = {R package version 0.2},   url = {https://github.com/CetiAlphaFive/MLbalance}, }"},{"path":"https://cetialphafive.github.io/MLbalance/index.html","id":"mlbalance-","dir":"","previous_headings":"","what":"Machine Learning Balance","title":"Machine Learning Balance","text":"MLbalance implements novel machine learning balance test, balance permutation test, experiments binary, multiarm, continuous treatments. purpose test detect failures random assignment, data fabrication, imbalance across treatment arms. detail, see Rametta Fuller (2024). package development, recommendations comments welcome issues section.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Machine Learning Balance","text":"Stable version available Github : can install development version MLbalance GitHub :","code":"# install.packages(\"pak\") pak::pak(\"MLCause/MLbalance\") # install.packages(\"pak\") pak::pak(\"CetiAlphaFive/MLbalance\")"},{"path":"https://cetialphafive.github.io/MLbalance/index.html","id":"binary-treatment-example","dir":"","previous_headings":"","what":"Binary Treatment Example","title":"Machine Learning Balance","text":"basic example demonstrating balance permutation test simulated binary treatment DGP multidimensional contamation treatment assignment.","code":"# install.packages(\"randomizr\") library(MLbalance) # set.seed(1995) # # Simple simulation  n <- 1000 p <- 20 X <- matrix(rnorm(n*p,0,1),n,p) w_real <- rbinom(n, 1, ifelse(.021 + abs(.4*X[,4] - .5*X[,8]) < 1, .021 + abs(.4*X[,4] - .5*X[,8]), 1)) # install.packages(\"randomizr\") w_sim <- randomizr::complete_ra(N = n,m = sum(w_real)) e <- rnorm(n,0,1) y <- 2*w_real*X[,4] + 3*X[,2] -2*X[,8] + e df <- data.frame(y,w_real,w_sim,X) # r.check <- random_check(W_real = df$w_real, #real treatment assignment vector                          W_sim  = df$w_sim, #simulated vector, comment out this argument to use permutated real assignment vector instead                          X      = subset(df,select = -c(y,w_real,w_sim)) #matrix of pretreatment covariates (or any covariates that SHOULD NOT be related to the assignment process/mechanism              ); r.check$plot #> Simulated Assignment Vector Provided, Null Distribution Generated Using Simulated Treatment Assignment. #>  #>  #> Simple Count Table(s) #>  #> W_real #>   0   1  #> 520 480  #> W_sim #>   0   1  #> 520 480  #>  #>  #> Warning: Extreme Propensity scores detected (greater than .9 or less than .1). #>                                       Examine $treat.props for more detail. # to see variables important for predicting assignment, check r.check$imp.predictors"},{"path":"https://cetialphafive.github.io/MLbalance/reference/MLbalance-package.html","id":null,"dir":"Reference","previous_headings":"","what":"MLbalance: Machine Learning Balance — MLbalance-package","title":"MLbalance: Machine Learning Balance — MLbalance-package","text":"suite machine learning balance tests estimation tools experimental observational data, including fast implementation classification permutation test (Johann Gagnon-Bartsch Yotam Shem-Tov, 2019). purpose suite detect unintentional failures random assignment, data fabrication, simple covariate imbalance random , -random, experimental designs. tools meant work \"--shelf\" also customizable advanced users.","code":""},{"path":[]},{"path":"https://cetialphafive.github.io/MLbalance/reference/MLbalance-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"MLbalance: Machine Learning Balance — MLbalance-package","text":"Maintainer: Jack T. Rametta jtrametta@gmail.com Authors: Sam Fuller sfuller@fas.harvard.edu","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/balance.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete Balance Assessment and Treatment Effect Estimation — balance","title":"Complete Balance Assessment and Treatment Effect Estimation — balance","text":"unified function covariate balance assessment treatment effect estimation. Combines formal balance test (via classification permutation test), visual diagnostics (propensity score distributions), treatment effect estimates using difference--means augmented inverse propensity weighting (AIPW).","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/balance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete Balance Assessment and Treatment Effect Estimation — balance","text":"","code":"balance(   Y = NULL,   W,   X,   alpha = 0.05,   perm.N = 1000,   class.method = \"ferns\",   seed = 1995,   fastcpt.args = list() )  # S3 method for class 'balance' print(x, ...)  # S3 method for class 'balance' summary(object, ...)  # S3 method for class 'balance' plot(x, which = \"all\", combined = TRUE, breaks = 15, ...)"},{"path":"https://cetialphafive.github.io/MLbalance/reference/balance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete Balance Assessment and Treatment Effect Estimation — balance","text":"Y Outcome vector (numeric) NULL. NULL, treatment effect estimation (treatment effect plot) skipped. W Treatment assignment vector (binary: 0/1 logical). X Pre-treatment covariate matrix data frame. alpha Significance level balance test. Default 0.05. perm.N Number permutations balance test. Default 1000. class.method Classification method balance test. Default \"ferns\". seed Random seed reproducibility. Default 1995. fastcpt.args named list additional arguments pass fastcpt. example, fastcpt.args = list(parallel = TRUE, leaveout = 0.2). x balance result object. ... Additional arguments (currently unused). object balance result object (summary method). Character vector specifying plots create. Options \"pscores\", \"null_dist\", \"effects\", \"\". combined Logical. TRUE, displays three plots combined panel. Default TRUE. breaks Number breaks histograms. Default 15.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/balance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete Balance Assessment and Treatment Effect Estimation — balance","text":"list class \"balance\" containing: balance_test Results fastcpt including p-value propensity scores. dim Difference--means estimate standard error confidence interval (Y provided). aipw Doubly robust estimate causal forest (propensity weighting) standard error CI (Y provided). aipw_const Outcome-adjusted estimate causal forest (propensity weighting) SE CI (Y provided). passed Logical indicating whether balance test passed. alpha significance level used. cf fitted causal_forest object advanced users (Y provided).","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/balance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Complete Balance Assessment and Treatment Effect Estimation — balance","text":"","code":"if (FALSE) { # \\dontrun{ # Generate example data n <- 500 p <- 10 X <- matrix(rnorm(n * p), n, p) W <- rbinom(n, 1, 0.5) Y <- W * 0.5 + X[,1] * 0.3 + rnorm(n)  # Run complete balance assessment result <- balance(Y, W, X) result summary(result) plot(result) } # }"},{"path":"https://cetialphafive.github.io/MLbalance/reference/fastcpt.html","id":null,"dir":"Reference","previous_headings":"","what":"(fast) Classification Permutation Test — fastcpt","title":"(fast) Classification Permutation Test — fastcpt","text":"Code derived cpt package Johann Gagnon-Bartsch. version optimized speed, core structure . original package uses RandomForest package, quite slow lacks variety features available packages. code converts ranger also adds option random ferns. Although obscure, random ferns actually perfect - solid classifier natively handles interactions runs extremely fast pretty much hardware. also worked add version logit faster using RcppNumerical package, added basic parallel backend function runs reasonably quickly larger datasets. Taken together changes allow user run cpt seconds rather minutes even hours many datasets. Description cpt: Non-parametric test equality multivariate distributions. Trains classifier classify (multivariate) observations coming one several distributions. classifier able classify observations better expected chance (using permutation inference), null hypothesis distributions equal rejected.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/fastcpt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"(fast) Classification Permutation Test — fastcpt","text":"","code":"fastcpt(   Z,   T,   leaveout = 0,   class.methods = \"ferns\",   metric = \"probability\",   ensemble.metric = \"mean.prob\",   paired = FALSE,   perm.N = 1000,   leaveout.N = 100,   comb.methods = c(class.methods, \"ensemble\"),   comb.method = \"fisher\",   R.seed = 1995,   ranger.seed = 1995,   parallel = FALSE,   alpha = 0.05,   progress = TRUE )"},{"path":"https://cetialphafive.github.io/MLbalance/reference/fastcpt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"(fast) Classification Permutation Test — fastcpt","text":"Z data. n p matrix, n number observations, p number covariates. T treatment variable. converted factor. leaveout number observations treatment group include test set. 0, data left -sample test statistic used. (See note .) integer greater equal 1, number observations treatment group leave . Values 0 1 converted ceiling(min(table(T))*leaveout). class.methods character vector different classification methods use. Can \"forest\", \"ferns\", \"logistic2fast\". Default \"ferns\" fast handles interactions well. metric test statistic use. Can \"rate\" (classification accuracy rate), \"mse\", \"probability\". default value (\"probability\") recommended. ensemble.metric test statistic use ensemble classifier composed individual classifiers. Can \"vote\", \"mean.mse\", \"mean.prob\". default value (\"mean.prob\") recommended. paired paired permutation test. data Z must ordered first observation T==1 paired first observation T==2, second observation T==1 paired second observation T==2, etc. can accomplished either letting first n/2 rows treatment observations, last n/2 rows control observations (order), using first two rows first pair, second two rows second pair, etc. perm.N number permutations. leaveout.N number training set / test set iterations. iteration, random test set generated. Thus, test sets typically overlap somewhat. one exception: leaveout = 1 leaveout.N = n, traditional leave-one-procedure used (observation left exactly ). comb.methods classifiers include combined, overall p-value. Can subset classifiers specified class.methods addition \"ensemble\" ensemble classifier. comb.method method combining p-values individual classifiers order produce overall p-value. default (\"fisher\") recommended. possible option \"min\" uses minimum p-value. Note cases, combined p-value returned; rather, combined p-value treated test statistic, subject permutation analysis; returned resulting p-value analysis. R.seed Random seed R's set.seed (reproducibility). ranger.seed Random seed ranger (reproducibility). parallel Logical. TRUE, uses mirai parallel processing across permutations. alpha Significance level pass/fail determination. Default 0.05, appropriate experimental contexts even slight classification ability concerning. observational studies, lower threshold may appropriate. progress Logical. TRUE (default), displays progress bar permutation testing.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/fastcpt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"(fast) Classification Permutation Test — fastcpt","text":"list containing: pval overall p-value, combining results individual classifiers. teststat observed test statistics individual classifiers. nulldist permutation distributions individual classifiers. pvals p-values individual classifiers. alpha significance level used pass/fail determination.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/fastcpt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"(fast) Classification Permutation Test — fastcpt","text":"","code":"if (FALSE) { # \\dontrun{ # Generate example data n <- 200 p <- 10 Z <- matrix(rnorm(n * p), n, p) T <- rep(c(1, 2), each = n/2)  # Run fast classification permutation test result <- fastcpt(Z, T, class.methods = \"forest\", perm.N = 100) result$pval } # }"},{"path":"https://cetialphafive.github.io/MLbalance/reference/plot.fastcpt.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot fastcpt Results — plot.fastcpt","title":"Plot fastcpt Results — plot.fastcpt","text":"Creates visualization Classification Permutation Test results. Displays permuted null distribution histogram observed test statistic overlaid vertical line. plot indicates whether test passed (p > 0.05) failed.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/plot.fastcpt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot fastcpt Results — plot.fastcpt","text":"","code":"# S3 method for class 'fastcpt' plot(x, breaks = 25, ...)"},{"path":"https://cetialphafive.github.io/MLbalance/reference/plot.fastcpt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot fastcpt Results — plot.fastcpt","text":"x fastcpt result object returned fastcpt. breaks Number breaks histogram. Default 25. ... Additional arguments (currently unused).","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/plot.fastcpt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot fastcpt Results — plot.fastcpt","text":"ggplot object displaying null distribution histogram observed test statistic.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/plot.fastcpt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot fastcpt Results — plot.fastcpt","text":"","code":"if (FALSE) { # \\dontrun{ # Generate example data n <- 200 p <- 10 Z <- matrix(rnorm(n * p), n, p) T <- rep(c(1, 2), each = n/2)  # Run fast classification permutation test result <- fastcpt(Z, T, class.methods = \"forest\", perm.N = 100)  # Plot the results plot(result) } # }"},{"path":"https://cetialphafive.github.io/MLbalance/reference/print.fastcpt.html","id":null,"dir":"Reference","previous_headings":"","what":"Print fastcpt Results — print.fastcpt","title":"Print fastcpt Results — print.fastcpt","text":"Prints brief overview Classification Permutation Test results.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/print.fastcpt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print fastcpt Results — print.fastcpt","text":"","code":"# S3 method for class 'fastcpt' print(x, ...)"},{"path":"https://cetialphafive.github.io/MLbalance/reference/print.fastcpt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print fastcpt Results — print.fastcpt","text":"x fastcpt result object returned fastcpt. ... Additional arguments (currently unused).","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/print.fastcpt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print fastcpt Results — print.fastcpt","text":"Invisibly returns original object.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/random_check.html","id":null,"dir":"Reference","previous_headings":"","what":"Balance Permutation Test — random_check","title":"Balance Permutation Test — random_check","text":"main balance permutation test function. First, function attempts model treatment assignment (W_real) function pre-treatment covariates (X). using honest, boosted random forest (see Ghosal Hooker 2018) built-hyperparameter tuning. model used generate real treatment propensity scores. , build second boosted random forest model using pre-treatment covariates tuning parameter settings either simulated, randomly permuted, treatment assignment outcome variable. function proceeds output real null treatment propensity scores well diagnostics plot comparing distributions. purpose exercise compare real treatment propensity distribution null distribution treatment assignment correctly orthogonal pre-treatment covariates. interpret results, advisable notice extreme, deterministic treatment propensity scores near zero one, divergences design expectations. general, randomization succeeded two distributions closely overlap similar means variances. results unclear, advisable estimate average treatment effects via method accounts propensity treatment (e.g., augmented inverse propensity weighting, overlap weighting, etc.).","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/random_check.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Balance Permutation Test — random_check","text":"","code":"random_check(   W_real,   W_sim = NULL,   X,   R.seed = 1995,   grf.seed = 1995,   breaks = 15,   facet = FALSE )"},{"path":"https://cetialphafive.github.io/MLbalance/reference/random_check.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Balance Permutation Test — random_check","text":"W_real Real treatment assignment vector. W_sim Simulated treatment assignment vector. provided, permuted W_real used. X Pre-treatment covariate matrix data frame. R.seed Random seed used set.seed (replicability). grf.seed Random seed used grf's seed (replicability). breaks number breaks output histogram. Default 15. facet facet treatment assignment. Default FALSE.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/random_check.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Balance Permutation Test — random_check","text":"","code":"if (FALSE) { # \\dontrun{ n <- 1000 p <- 20 X <- matrix(rnorm(n*p,0,1),n,p) w_real <- rbinom(n, 1, ifelse(.021 + abs(.4*X[,4] - .5*X[,8]) < 1,                  .021 + abs(.4*X[,4] - .5*X[,8]), 1)) df <- data.frame(w_real,X) r.check <- random_check(W_real = df$w_real,                         X = subset(df, select = -w_real)) r.check$plot } # }"},{"path":"https://cetialphafive.github.io/MLbalance/reference/summary.fastcpt.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary of fastcpt Results — summary.fastcpt","title":"Summary of fastcpt Results — summary.fastcpt","text":"Prints formatted summary Classification Permutation Test results including p-values, test statistics, pass/fail status.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/summary.fastcpt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary of fastcpt Results — summary.fastcpt","text":"","code":"# S3 method for class 'fastcpt' summary(object, ...)"},{"path":"https://cetialphafive.github.io/MLbalance/reference/summary.fastcpt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary of fastcpt Results — summary.fastcpt","text":"object fastcpt result object returned fastcpt. ... Additional arguments (currently unused).","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/summary.fastcpt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary of fastcpt Results — summary.fastcpt","text":"Invisibly returns original object.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/summary.fastcpt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summary of fastcpt Results — summary.fastcpt","text":"","code":"if (FALSE) { # \\dontrun{ result <- fastcpt(Z, T, class.methods = \"forest\", perm.N = 100) summary(result) } # }"},{"path":"https://cetialphafive.github.io/MLbalance/reference/vip.html","id":null,"dir":"Reference","previous_headings":"","what":"Variable Importance Function — vip","title":"Variable Importance Function — vip","text":"convenience function takes trained grf model object returns data frame variable importance scores using grf's simple variable importance metric.","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/vip.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Variable Importance Function — vip","text":"","code":"vip(model)"},{"path":"https://cetialphafive.github.io/MLbalance/reference/vip.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Variable Importance Function — vip","text":"model Trained GRF Model Object","code":""},{"path":"https://cetialphafive.github.io/MLbalance/reference/vip.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Variable Importance Function — vip","text":"","code":"x <- data.frame(X1 = rnorm(1000)) y <- rnorm(1000) model <- grf::regression_forest(X = x,Y = y) vip(model) #>   varname vip #> 1      X1   1"}]
