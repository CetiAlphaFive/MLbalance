% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/balance.R
\name{balance}
\alias{balance}
\alias{print.balance}
\alias{summary.balance}
\alias{plot.balance}
\title{Complete Balance Assessment and Treatment Effect Estimation}
\usage{
balance(
  Y = NULL,
  W,
  X,
  alpha = 0.05,
  perm.N = 1000,
  class.method = "ferns",
  seed = 1995,
  fastcpt.args = list()
)

\method{print}{balance}(x, ...)

\method{summary}{balance}(object, ...)

\method{plot}{balance}(x, which = "all", combined = TRUE, breaks = 15, ...)
}
\arguments{
\item{Y}{Outcome vector (numeric) or \code{NULL}. If \code{NULL}, treatment effect
estimation (and the treatment effect plot) is skipped.}

\item{W}{Treatment assignment vector (binary: 0/1 or logical).}

\item{X}{Pre-treatment covariate matrix or data frame.}

\item{alpha}{Significance level for balance test. Default is 0.05.}

\item{perm.N}{Number of permutations for the balance test. Default is 1000.}

\item{class.method}{Classification method for balance test. Default is "ferns".}

\item{seed}{Random seed for reproducibility. Default is 1995.}

\item{fastcpt.args}{A named list of additional arguments to pass to \code{\link{fastcpt}}. For example, \code{fastcpt.args = list(parallel = TRUE, leaveout = 0.2)}.}

\item{x}{A balance result object.}

\item{...}{Additional arguments (currently unused).}

\item{object}{A balance result object (for summary method).}

\item{which}{Character vector specifying which plots to create. Options are "pscores", "null_dist", "effects", or "all".}

\item{combined}{Logical. If TRUE, displays all three plots in a combined panel. Default is TRUE.}

\item{breaks}{Number of breaks for histograms. Default is 15.}
}
\value{
A list of class "balance" containing:
\item{balance_test}{Results from fastcpt including p-value and propensity scores.}
\item{dim}{Difference-in-means estimate with standard error and confidence interval (only if \code{Y} is provided).}
\item{aipw}{Doubly robust estimate from causal forest (with propensity weighting) with standard error and CI (only if \code{Y} is provided).}
\item{aipw_const}{Outcome-adjusted estimate from causal forest (no propensity weighting) with SE and CI (only if \code{Y} is provided).}
\item{passed}{Logical indicating whether the balance test passed.}
\item{alpha}{The significance level used.}
\item{cf}{The fitted causal_forest object for advanced users (only if \code{Y} is provided).}
}
\description{
A unified function for covariate balance assessment and treatment effect estimation.
Combines a formal balance test (via classification permutation test), visual diagnostics
(propensity score distributions), and treatment effect estimates using both difference-in-means
and augmented inverse propensity weighting (AIPW).
}
\examples{
\dontrun{
# Generate example data
n <- 500
p <- 10
X <- matrix(rnorm(n * p), n, p)
W <- rbinom(n, 1, 0.5)
Y <- W * 0.5 + X[,1] * 0.3 + rnorm(n)

# Run complete balance assessment
result <- balance(Y, W, X)
result
summary(result)
plot(result)
}

}
